name: linear-dashboards
defaults:
  target_name: "{{ env_var('LINEAR_TARGET') }}"
includes:
  - path: dashboard/dashboard.visivo.yml
alerts: []
targets:
  - name: remote-snowflake
    type: snowflake
    database: "{{env_var('LINEAR_DATABASE')}}" 
    account: "{{env_var('LINEAR_SNOWFLAKE_ACCOUNT')}}"
    db_schema: "{{env_var('LINEAR_DB_SCHEMA')}}"
    username: "{{ env_var('LINEAR_DB_USER') }}"
    warehouse: "{{ env_var('LINEAR_WAREHOUSE') }}"
    password: "{{ env_var('LINEAR_DB_PASSWORD') }}"
    role: "{{env_var('LINEAR_ROLE')}}"
models:
  - name: issues
    sql: |
      select 
        i.*, 
        ua.display_name as assignee_name, 
        uc.display_name as creator_name
      from issue i 
      left JOIN users ua 
        on ua.id = i.assignee_id
      left JOIN users uc 
        on uc.id = i.creator_id

tables: []

dashboards:
- name: Linear Dashboard
  rows:
  - height: small
    items:
      - chart: ref(Hours To Triage)
      - chart: ref(Hours Triage To Start)
      - chart: ref(Hours Start To Completed)
      - chart: ref(Issues Created Per Week)
      - chart: ref(Issues Completed Per Week)
  - height: medium
    items:
      - chart: ref(issues-created-total-over-time)
      - chart: ref(issues-completed-total-over-time)
      - chart: ref(time-to-complete-total-over-time)
  - height: medium
    items:
      - chart: ref(issues-created-per-user-over-time)
      - chart: ref(issues-completed-per-user-over-time)
      - chart: ref(time-to-complete-per-user-over-time)
  - height: medium 
    items: 
      - markdown: | 
          ## Cohort of all issues over time (one trace including done & one without)
      - markdown: | 
          ## Sankey of issue status transitions

    
    


